# Copyright 2022 Canonical Ltd.
# See LICENSE file for licensing details.

# For a complete list of supported options, see:
# https://juju.is/docs/sdk/metadata-reference

name: temporal-k8s
display-name: Temporal Server
summary: Temporal server operator
description: |
  Temporal is a developer-first, open source platform that ensures
  the successful execution of services and applications (using workflows).
maintainers: 
  - Commercial Systems <jaas-crew@lists.canonical.com>
docs: https://discourse.charmhub.io/t/temporal-server-documentation-overview/8948
tags:
  - temporal
  - workflow
  - task
  - activities
  - development
issues: https://github.com/canonical/temporal-k8s-operator/issues
assumes:
  - juju >= 3.1
  - k8s-api

peers:
  temporal:
    interface: temporal

requires:
  admin:
    interface: temporal
    limit: 1
  db:
    interface: pgsql
    limit: 1
  visibility:
    interface: pgsql
    limit: 1
  ingress:
    interface: ingress
    limit: 1
  ui:
    interface: temporal
    limit: 1
    optional: true

containers:
  temporal:
    resource: temporal-server-image
    # Included for simplicity in integration tests.
    upstream-source: temporalio/server:1.17.4

resources:
  temporal-server-image:
    type: oci-image
    description: OCI image for Temporal
